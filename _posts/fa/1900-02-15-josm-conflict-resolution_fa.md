---
layout: doc-rtl
title: حل تداخل در JOSM
permalink: /fa/josm/josm-conflict-resolution/
lang: fa
category: josm
---

حل تداخل در JOSM
====================

> تاریخ بازبینی ۱۳۹۵/۰۷/۰۶  

گاهی اوقات در JOSM مشغول به کار هستید و زمانی که می‌خواهید تمام ویرایش‌های زیبای خود را آپلود کنید، پیامی ناخوشایند در برابرتان ظاهر می‌شود که از وقوع تداخل (conflict) خبر می‌دهد!  
![conflict detected][]  
آنچه که اتفاق افتاده این است که شما مقداری داده دانلود کرده‌اید. در این داده یک نقطه هم هست که ما اسم آن را «گره الف» می‌گذاریم. سپس هنگامی که شما در حال ویرایش بودید، یک نفر دیگر نیز «گره الف» را دانلود کرده، آن را تغییر داده و تغییراتش را در OpenStreetMap ذخیره هم کرده است. حالا وقتی که شما سعی می‌کنید نسخهٔ خودتان از «گره الف» را آپلود نمایید، نسخهٔ آن با چیزی که در OSM ذخیره شده، متفاوت است. بنابراین JOSM نمی‌داند کدام نسخه از «گره الف» را باید نگه دارد.  

تداخلات
----------

گاهی اوقات، JOSM خودش می‌تواند تداخل را حل کند و پیامی مانند زیر به شما می‌دهد:  
![resolved automatically][]  
این یعنی JOSM به‌طور خودکار تصمیم گرفته که اقلام موجود در مجموعه‌داده‌های محلی شما را به کارساز اصلی آپلود نکند، زیرا کاربر دیگری قبلاً آن‌ها را حذف کرده‌است. با وجود این، JOSM بعضی از تداخل‌ها را نمی‌تواند به‌سادگی حل کند و بنابراین تصمیم‌گیری را بر عهدهٔ کاربر می‌گذارد تا بهترین شیوهٔ عمل را تعیین کند. و این یعنی خودتان باید تداخل را حل کنید.  

این به شما می‌گوید که به همهٔ تداخل‌های خود در لایهٔ Layer 1 در **Dialog List** نگاه کنید:  
![warning unresolved][]  

این پنجره به شما هشداری را نشان می‌دهد که می‌گوید در معرض تجربهٔ تداخل در ویرایش‌هایتان هستید. اگر check on the server (بررسی کارساز) را بزنید، قادر خواهید بود مشکلات ویرایش را برطرف کنید:  
![check on server][]  

این هشدار می‌گوید JOSM نتوانسته یک گره را حذف کند زیرا هنوز در یک راه به آن ارجاع داده می‌شود. برای اصلاح این، کاربر باید قبل از آپلود داده‌ها به JOSM بازگردد و تداخل را حل کند.  
![still in use][]  

حل تداخل
--------------------

روند حل تداخل بسیار ساده است، اگرچه ممکن است در JOSM ابتدا گیج‌کننده به نظر برسد. اساساً، JOSM برای هر تداخل دو گزینه پیش روی شما قرار می‌دهد: نسخه‌ای از یک شی که روی کامپیوتر شماست و نسخه‌ای از آن شی که روی کارساز است. باید انتخاب کنید که آیا نسخهٔ خود را نگه می‌دارید یا نسخهٔ جدیدی که روی کارساز هست، باقی بماند.  
ممکن است فکر کنید «البته که نسخهٔ من بهتره!» و شاید حق با شما باشد. اما به مثال ابتدای این فصل فکر کنید. شاید در حالی که شما مشغول ویرایش بوده‌اید، نقشه‌کش دیگری اطلاعات زیادی را به یکی از گره‌های مجموعه‌دادهٔ شما اضافه کرده باشد. اگر شما نسخهٔ خود را به نسخهٔ او ترجیح دهید، تمام اطلاعات ارزشمندی که آن کاربر اضافه کرده را از دست می‌دهید. ازاین‌رو باید بررسی کنید که آیا نسخهٔ او را نگه دارید یا آن را با نسخهٔ خودتان ترکیب کنید.  
هنگامی که پنجرهٔ تداخل ظاهر می‌شود، بهترین کار این است که دکمهٔ «Synchronize ... only» را انتخاب کنید. شاید لازم باشد این کار را برای بیش از یک شی انجام دهید، اما بهتر است تداخل‌ها را یکی‌یکی حل کنید.  
![synchronize node][]  
هنگامی که روی این دکمه کلیک کنید، پنجره‌ای باز می‌شود که جزئیات تداخل را شرح می‌دهد. پیام خطا ممکن است پیچیده به نظر برسد، اما ساده است. نماد مربع قرمز در زبانهٔ بالا نوع تداخل را مشخص می‌کند. تداخل مثال زیر به خصوصیت‌ها، مانند موقعیت و وجود شی اشاره می‌کند. به همین دلیل است که مختصات (coordinates) و وضعیت حذف (deleted state) ذکر شده‌اند.  

**انواع تداخل:**

- **خصوصیت‌ها (Properties):** شی جابه‌جا شده (مختصات) یا حذف شده  
- **تگ‌ها (Tags):** تگ‌ها مطابقت ندارند  
- **گره‌ها (Nodes):** در لیست گره‌های دو راه اختلاف وجود دارد  
- **اعضا (Members):** در لیست اعضای یک رابطه اختلاف وجود دارد  
![properties with conflicts][]  

هر بار که تداخل پیش می‌آید فقط برای دو ویرایشِ مختلف است. اگر سه تداخل یا بیشتر وجود داشته باشد، آنگاه زنجیره‌ای از تداخل‌ها ظاهر خواهد شد. بنابراین در هر زمان فقط می‌توانید دو تداخل را انتخاب یا ادغام کنید. می‌توانید نسخهٔ خود را انتخاب کنید، یا نسخهٔ دیگر را انتخاب کنید، یا در برخی موارد هر دو را با هم ادغام کنید.  

در مثال زیر شما گزینهٔ ادغام را ندارید. اگر فکر می‌کنید که ویرایش‌های شما درست است، روی ستون اول یا My version کلیک کنید. اگر فکر می‌کنید که ویرایش‌های آنان بهتر است، روی Their version کلیک کنید.  
![conflicts resolved][]  

پس از اینکه نسخه‌ای را که فکر می‌کنید بهتر است انتخاب کردید، روی «به‌کارگیری راه‌حل» (Apply Resolution) کلیک کنید. چند پنجرهٔ دیگر ظاهر می‌شود و پس از آن می‌توانید ویرایش‌هایتان را آپلود کنید. ویرایش‌های بیشتری انجام دهید. سپس روی Upload کلیک کنید. پنجره‌ای باز می‌شود که می‌گوید:  
![command stack][]  

در منوی Windows پنجرک Conflict وجود دارد که تداخل‌ها را لیست می‌کند تعداد کل تداخل‌های حل‌نشده در عنوان پنجرک نمایش داده می‌شود. با کلیک روی یک تداخل، می‌توانید آن را انتخاب یا حل کنید. وقتی که تداخل‌های زیادی برای حل‌کردن دارید این پنجرک مفید است.  
![one unresolved][]  
 تا زمانی که این لیست خالی نشود، نمی‌توانید تغییرات خود را آپلود کنید.  

راه‌های اجتناب از تداخل
------------------------

### مرتباً آپلود کنید

برای به حداقل رساندن شانس و تعداد تداخل‌ها، ویرایش‌های خود را به‌طور منظم آپلود کنید. تداخل بیشتر برای کسانی رخ می‌دهد که تمایل دارند منطقهٔ در حال کار را روی کارساز محلی خود ذخیره کنند و تا آپلودکردن آن مدت زمانی را صبر می‌کنند. بهتر است منطقهٔ موردنظر را دانلود کنید، ویرایش کنید و بلافاصله آپلود کنید. هرچه زمان بین دانلود داده و آپلود تغییرات بیشتر باشد، احتمال این که در این مدت کسی چیزی را ویرایش کرده باشد بیشتر می‌شود. اگر در یک کارزار نقشه (Mapathon) هستید و عارضه‌ای مانند یک خیابان را ویرایش می‌کنید که ممکن است بقیه نیز روی آن کار کنند، خیلی زود، مثلاً پس از هر ۶ ویرایش، تغییرات خود را آپلود کنید!  

### در محدوده‌ای که دانلود می‌کنید ویرایش کنید

ویرایش در ناحیهٔ مشخصی که دانلود کرده‌اید خطر تداخل را کم می‌کند. اطمینان حاصل کنید که خارج از منطقه‌ای که دانلود کرده‌اید، ویرایش نمی‌کنید. در JOSM به‌راحتی می‌توانید ببینید که کدام مناطق خارج از منطقهٔ دانلودشده است، زیرا پس‌زمینه به جای سیاه یکدست، دارای خطوط هاشور مورب است.  

![edit outside area][]  

خلاصه
--------
هنگامی که با JOSM ویرایش می‌کنید، خطر درگیرشدن با تداخل‌ها وجود دارد. تداخل زمانی رخ می‌دهد که یک شی همزمان به دست دو نفر ویرایش شود. با درک اینکه تداخل چیست و چگونه باید با آن برخورد کنید، می‌توانید مطمئن باشید که بهترین ویرایش ممکن در OpenStreetMap ذخیره می‌شود.  


<!-- More stuff, could go into an additional chapter - DO NOT TRANSLATE
## ضمیمه. تداخلات خاص

### تداخلات تگ

اگر برچسب‌های یک نسخه از یک شی از برچسب‌های
نسخه دیگر آن متفاوت باشند، کادر محاوره‌‌ای تداخلات در زبانه تگ‌ها ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image08.png) را 
نشان می‌دهد. روی زبانه کلیک کنید تا کادر محاوره‌ای برای حل تداخل تگ
نشان داده شود.

سه جدول در این کادر محاوره‌ای وجود دارد، از چپ به راست:

1. نسخه من: تگ‌های اولین نسخه شیء شرکت‌کننده 
    در این تداخل را نشان می‌دهد. اینها معمولاً تگ‌های نسخه
    موجود در اطلاعات محلی شما هستند.
2. نسخه ادغام شده: تگ‌های ادغام شده را نشان می‌دهد. این جدول در ابتدا
    خالی است. هرچه تداخل تگ بیشتری حل کنید، مقدار تگهای بیشتری در 
    این جدول نمایش داده خواهد شد.
3. نسخه آنها: تگ‌های نسخه دوم شیء را که
    این تداخل حضور دارند را نشان می‌دهد. اینها معمولاً تگهایی هستند
    که در نسخه حال حاضر شیء بر روی سرور ذخیره شده‌اند.

در مثال زیر هر دو نسخه تگ "نام" دارند. مقادیر در
هر دو نسخه متفاوت هستند و بنابراین JOSM 
ردیف آنها را با رنگ پس‌زمینه قرمز نشان می‌دهد. ارزش نسخه اول 
"مدرسه متوسطه" است، نسخه مقابل دارای ارزش "مدرسه ابتدایی"
 است. حالا شما باید تصمیم بگیرید کدام یک از این ارزش‌ها را می خواهید حفظ کنید
و کدام را دور می‌اندازید.

![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image07.png)

روی مقداری که می‌خواهید نگه دارید، در این مثال مورد
ارزش سمت چپی، کلیک کنید. اگر بر روی مقدار دوبار کلیک کنید یا اینکه
روی ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image21.png) کلیک کنید. شما تصمیم گرفتید که این مقدار را نگه دارید و
مقدار طرف مقابل را دور بیندازید. حالا جدول وسطی مقداری که نگه داشته شده را نشان می‌دهد
و رنگ پس‌زمینه به سبز تبدیل می‌شود.

![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image10.png)

هنگامی که دکمه Apply Resolutionis فعال شود می‌توانید تصمیم خود را اعمال کنید.
مقادیری که انتخاب کرده‌اید اعمال می‌شوند و کادر محاوره‌ای بسته می شود.

![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image03.png)

## حل اختلاف لیست گره دو نسخه از یک راه

اگر آیکن ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image08.png) را در زبانه گره‌ها ببینید، شما
باید اختلافات در فهرست
[گره‌های](http://josm.openstreetmap.de/wiki/Help/Concepts/Object) دو
[راه](http://josm.openstreetmap.de/wiki/Help/Concepts/Object) را حل کنید.
سه ستون در پانل مربوطه وجود دارد (تصویر زیر را ببینید):

1. جدول سمت چپ لیست گره‌های نسخه محلی 
    شی را نشان می‌دهد.
2. جدول سمت راست لیست گره‌های سرور را نشان می دهد
    شی را نشان می‌دهد.
3. جدول وسط لیست گره‌های ادغام شده راه را نشان می‌دهد

در ابتدا، جدول وسط خالی است. اکنون باید تصمیم بگیرید که کدام گره
را از مجموعه داده‌های محلی (جدول چپ) و کدام گره را از 
مجموعه داده‌های سرور (جدول راست) نگهدارید.

![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image24.png)

### جریان کار استاندارد

جریان کار استاندارد برای حل تداخل لیست گره دو
[نسخه
شی](http://josm.openstreetmap.de/wiki/Help/Concepts/Object) شامل
سه مرحله است:

1. گره‌ها را از هر نسخه شیء انتخاب کنید و لیست گره‌های حاصل را 
    در صورت لزوم دوباره مرتب کنید.
2. با کلیک روی دکمه زیر لیست گره‌های ادغام شده را فریز کنید
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image16.png). هنگامی که لیست گره‌های ادغام شده را فریز می کنید
    به JOSM می‌گوییید که تمام تداخلات در لیست گره حل شده است.
3. حل انجام شده  را  اعمال کنید

### جریان کار ساده: لیست گره‌های نسخه محلی شیء خود را نگه دارید

مثال زیر، جریان کار را زمانی که تصمیم گرفته‌اید تمام گره‌ها را از همان شیء محلی خود به همان ردیف نگه دارید را نشان می‌دهد.

- اول، همه عناصر جدول چپی را (با استفاده از ماوس یا توسط 
    با فشار دادن Ctrl-A در جدول) انتخاب کنید (تصویر بعدی را ببینید):

    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image04.png)

- سپس روی  
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image19.png)
    برای کپی گره‌های انتخاب شده به جدول وسطی با گره‌های ادغام شده کلیک کنید:

    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image01.png)

- در نهایت روی
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image16.png)
    برای فریز لیست گره‌های ادغام شده کلیک کنید:

    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image20.png)

    آیکن زبانه گره اکنون به  
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image00.png)
    تغییر می‌کند و می‌توانید تصمیمات ادغام را اعمال کنید.

### پشتیبانی از مقایسه لیست گره‌ها

تفاوت بین لیست گره از دو نسخه شیء، به ویژه برای راه هایی با بسیاری از گره ها، می تواند دشوار باشد.

Dialog Dialogue شما را در پیدا کردن تفاوت ها پشتیبانی می کند. این می تواند دو لیست از گره ها را نمایش دهد (لیست گره "من"، لیست گره های ادغام شده و لیست "گره" آنها) را مقایسه می کند و می تواند تفاوت بین آنها را با رنگ های پس زمینه خاص ارائه دهد.

از جعبه ترکیبی زیر شما می توانید انتخاب کنید که جفت لیست گره برای مقایسه:

![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image15.png)

1. من با آنها: جدول چپ را با جدول سمت راست مقایسه می کند
    در گفتگو اختالف
2. من با ادغام: جدول چپتر با جدول وسط را در مقایسه می کند
    گفتگوی تقابل
3. آنها با ادغام: جدول میانی را با جدول سمت راست مقایسه می کند
    در گفتگو اختالف

بسته به موقعیت یک گره در لیست پس زمینه های مختلف
رنگ ها استفاده می شود:

1. گره فقط در این لیست هست. در لیست مقابل وجود ندارد:
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image13.png)
2. گره در هر دو لیست هست، اما در موقعیت‌های مختلف قرار دارد:
    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image02.png)
3. پس زمینه سفید به این معنی است که یک گره در هر دو لیست
    موقعیت یکسانی دارد.

    ![]({{site.baseurl}}/images/intermediate/en_conflict_resolution_image17.png)

-->

[conflict detected]: /images/josm/conflict-detected.png
[resolved automatically]: /images/josm/resolved-automatically.png
[warning unresolved]: /images/josm/warning-unresolved.png
[check on server]: /images/josm/check-on-server.png
[still in use]: /images/josm/still-in-use.png
[synchronize node]: /images/josm/synchronize-node.png
[properties with conflicts]: /images/josm/properties-with-conflicts.png
[conflicts resolved]: /images/josm/conflicts-resolved.png
[synchronize node]: /images/josm/synchronize-node.png
[command stack]: /images/josm/command-stack.png
[one unresolved]: /images/josm/one-unresolved.png
[edit outside area]: /images/josm/edit-outside-area.png