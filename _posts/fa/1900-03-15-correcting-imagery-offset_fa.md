---
layout: doc-rtl
title: تصحیح آفست تصاویر
permalink: /fa/josm/correcting-imagery-offset/
lang: fa
category: josm
---

آفست تصاویر
===============

> تاریخ بازبینی ۱۳۹۴/۰۶/۳۰  

ارائه‌دهندگان تصاویر معمولاً ژئورفرنس‌کردن تصاویرشان را به‌درستی انجام می‌دهند، اما گاهی اوقات تصاویر خارج از موقعیت قرار می‌گیرند. این موضوع به‌خصوص در مناطق تپه‌ای و کوهستانی صدق می‌کند که آنجاها پهن‌کردن و کشیدن یک تصویر مسطح روی منطقه‌ای از زمین با ناهمواریِ زیاد به‌سختی قابل‌انجام است. هنگامی که تصاویر را در JOSM بار می‌کنید، این امکان وجود دارد که ده متر یا بیشتر نسبت به موقعیت واقعی تفاوت داشته باشد. به این **آفست تصویر (imagery offset)** گفته می‌شود.  

به تصویر زیر توجه کنید: دو عکس هواییِ جداگانه، هر کدام زمین‌مرجع شده و با هم ادغام شده‌اند.  از آنجا که فرآیند ژئورفرنس بی‌نقص نيست، تصاوير به‌طور كامل روی هم نمی‌خوابند. ازاین‌رو یکی یا هر دوی آن‌ها باید نادرست باشد.  

![Misaligned imagery][]

ما تقریباً دو روش اصلی ساخت نقشه را یاد گرفته‌ایم؛ یکی از آن‌ها استفاده از تصاویر هوایی برای شناسایی عوارض زمین است و دیگری استفاده از GPS برای ضبط مسیر و نقاط بین‌راهی و سپس افزودن آن‌ها به OpenStreetMap است. مزایای تصویر هوایی بسیار روشن است. شما به‌عنوان نقشه‌کش قادر هستید کل تصویر را یکجا ببینید و جزئیات مختلف آن را مشاهده کنید، و با در نظر گرفتن اطلاعات خود از منطقه، به‌راحتی جاده‌ها، ساختمان‌ها، و نواحی را ردیابی کنید. یکی از مزیت‌های کلیدی GPS نسبت به تصاویر این است که به‌اندازهٔ آن‌ها مشکل جابه‌جایی یا آفست ندارد. GPS همیشه طول و عرض جغرافیایی صحیح را ارائه می‌دهد. تنها استثنا زمانی است که ساختمان‌های بلند یا کوه‌ها مانع رسیدن سیگنال‌های ماهواره‌ای می‌شوند، اما در این حالت، خطا به آسانی تشخیص داده می‌شود. رد GPS را در این تصویر با لایهٔ تصویر هوایی Bing در زیر آن مقایسه کنید:  

![Aerial vs GPS][]

با توجه به آنچه تا کنون آموختیم، روشن است که رد GPS تقریباً با واقعیت می‌خوانَد و تصویر زیر آن خارج از موقعیت است. بنابراین اکنون باید بپرسیم «اگر تصویر خارج از موقعیت قرار گرفته، پس چگونه می‌توانیم از آن استفاده کنیم و نقشه‌های درست بسازیم؟»  

تصحیح افست تصاویر
-------------------------

پاسخ به سوال قبلی این است که ما می‌توانیم تصاویر را جابه‌جا کنیم و با چیزهایی که می‌دانیم در مکان صحیح قرار دارد، مانند ردهای GPS، هماهنگ کنیم. اصلاح افست تصویر در JOSM آسان است.  

بهترین مرجع برای تنظیم تصاویر، ردهای GPSای هستند که جاده‌ها را دنبال می‌کنند. و هرچه مسیر GPS بیشتری به‌عنوان مرجع داشته باشید، می‌توانید تصاویر خود را نزدیک‌تر به واقعیت تراز کنید. ازآنجایی‌که کاربران OpenStreetMap معمولاً ردهای GPS خود را به پایگاه‌دادهٔ OSM آپلود می‌کنند، می‌توانیم آن‌ها را دانلود کنیم و از آن‌ها برای ترازکردن تصاویر استفاده نماییم.  

- روی دکمهٔ دانلود کلیک کنید. ![JOSM download button][]{: height="24px"}  

- کادر Raw GPS Data نزدیک بالای پنجرهٔ دانلود را علامت بزنید ![Download raw GPS data][]{: height="24px"} منطقهٔ خود را انتخاب و روی Download کلیک کنید.  

- این کار یک لایهٔ اضافی حاوی ردهای GPS در JOSM دانلود می‌کند. بسته به اینکه کاربران OSM چه تعداد رد GPS آپلود کرده باشند، ممکن است تعدادی (یا حتی هیچ) رد مشاهده کنید:  

![Few GPS tracks from OSM][]

- یا ممکن است مسیرهای بسیاری را ببینید:  

![Many GPS tracks from OSM][]

- برای تنظیم یک لایهٔ تصویر، روی دکمهٔ «تنظیم افست تصویر» (Adjust imagery offset) در بالای JOSM کلیک کنید: ![Adjust imagery offset button][]{: height="24px"}  

- بدون توجه به کادری که ظاهر می‌شود، با استفاده از ماوس لایهٔ تصویر را جابه‌جا کنید به‌طوری که به‌نحو صحیح با مسیر GPS تراز شود. مسیرهای GPS باید تا حد امکان منطبق با جاده‌های موجود در تصویر باشند. مشاهده می‌کنید که اعداد آفست در کادر تغییر می‌کند.  

![Adjust imagery offset][]

- اگر بخواهید، می‌توانید این تنظیمات آفست را با نوشتن نام نشانک (bookmark) و سپس با کلیک روی OK ذخیره کنید. از این پس با رفتن به Imagery ->‏ Imagery offset و کلیک روی نام نشانک خود می‌توانید همین تنظیمات را به‌طور خودکار تنظیم کنید.  
- اگر نمی‌خواهید آفست را ذخیره کنید، بدون واردکردن نام نشانک، فقط روی OK کلیک کنید.  

اگر در OpenStreetMap رد GPSای وجود نداشته باشند و شما GPS نداشته باشید، چه؟ بدون مسیرهای GPS، ترازکردن تصاویر سخت است. اگر یک ناحیهٔ نسبتاً خالی است (خیلی زیاد نقشه‌کشی نشده)، می‌توانید از تصویر به همین شکلی که هست استفاده کنید و بعداً داده را اصلاح کنید. این که نقشهٔ یک منطقه ۲۰ یا ۳۰ متر آفست داشته باشد بهتر از این است که اصلاً هیچ نقشه‌ای نداشته باشد.  

اگر بتوانید طول و عرض جغرافیایی یک جسم را روی زمین به‌طور دقیق شناسایی کنید، با انجام این مراحل می‌توانید اطمینان حاصل کنید که تصویر در جای درستی قرار گرفته‌است:  

1. شیئی که موقعیت آن را می‌دانید، روی تصویر شناسایی کنید.  
2. روی عرض و طول جغرافیایی در گوشهٔ پایین سمت چپ JOSM کلیک کنید. ![JOSM lat lon][]{: height="24px"}  
3. در کادر محاوره‌ای که باز می‌شود، عرض و طول جغرافیایی که می‌دانید و عدد کوچکی برای زوم، حدود پنج یا ده، وارد کنید.  
![JOSM lat lon dialogue][]
4. با این کار مرکز نقشه در محل طول و عرض جغرافیایی قرار می‌گیرد و زوم می‌شود. اکنون می‌توانید مانند قبل تصویر را جابه‌جا کنید تا عارضه‌ای که می‌شناسید در موقعیت صحیح متمرکز شود.  

از سوی دیگر، اگر منطقه قبلاً به‌طور گسترده نقشه‌کشی شده است، امیدواریم نقشه‌کش‌های قبلی اشیا را در مکان صحیح خود کشیده باشند. در این حالت، می‌توانید تصویر را نسبت به نقشهٔ OSM تراز کنید، اما مراقب باشید! ممکن است نقشه‌کش‌های دیگر به آفست تصویر آگاه نباشند و هنگام نقشه‌کشی مرتکب اشتباه‌هایی شده باشند.  


پایگاه‌دادهٔ افست تصویر
---------------------------

اکنون می‌دانید که چطور مراقب آفست تصاویر باشید و آن را تصحیح کنید، اما مشکل بزرگ دیگری در این روش وجود دارد که تا کنون نادیده گرفته‌ایم. اگر هر کاربر OpenStreetMap تصویر را به‌صورت متفاوتی تنظیم کند، در این صورت پس‌زمینه‌ای که هر کس برای نقشه‌کشی استفاده می‌کند با پس‌زمینهٔ دیگران کمی اختلاف خواهد داشت.  

تصور کنید که نقشهٔ شهر کوچکی را می‌کشید و متوجه می‌شوید که تصاویر Bing پانزده متر به‌طرف شمال آفست دارد. بنابراین تصویر را تنظیم می‌کنید و سپس از آن برای کشیدن نقشهٔ دقیق کل شهر استفاده می‌کنید. اما پس از آن فردی دیگر می‌خواهد چیزی را به نقشه اضافه کند. او داده را دانلود و تصاویر Bing را بار می‌کند، اما دربارهٔ آفستی که شما کشف کرده‌اید چیزی نمی‌داند! او تصوّر می‌کند که چیزی اشتباه است و تمام عارضه‌های شهر ۱۵ متر جابه‌جا هستند و بنابراین شروع به جابه‌جاکردن آن‌ها می‌کند؛ که کار درستی نیست! این برای دادهٔ نقشهٔ شهر می‌تواند فاجعه‌آمیز باشد.  

به همین دلیل مهم است که تمام کاربران از آفست تصاویر مطلع باشند و همیشه باید قبل از نقشه‌کشی یک منطقه آن را بررسی کنند. برای کمک به حل این مشکل، تعدادی آدم باهوش افزونه‌ای ساخته‌اند که به کاربران اجازه می‌دهد اطلاعات آفست را در یک پایگاه‌داده ذخیره و با دیگران همرسانی کنند. بیایید ببینیم چگونه کار می‌کند:  

- منوی تنظیمات JOSM را باز کنید و روی زبانهٔ Plugins کلیک کنید. ![JOSM plugins tab][]{: height="24px"}  

- افزونه‌ای به نام imagery_offset_db را پیدا کنید و کادر کنار آن را علامت بزنید.  

![Imagery_offset_db plugin][]

- روی OK کلیک کنید. برای تکمیل نصب افزونه باید JOSM را مجدداً راه‌اندازی کنید.  

به همان شیوه‌ای که می‌توانید آفست‌ها را نشانک‌گذاری کنید (Bookmark)، با این افزونه نیز می‌توانید آفست‌ها را در یک پایگاه‌دادهٔ مرکزی ذخیره کنید و از طریق همین پایگاه‌داده به آفست‌هایی که سایر کاربران تنظیم کرده‌اند، دسترسی داشته باشید. ازاین‌رو، اگر نقشه‌کشی آفست تصویرِ یک منطقه را تنظیم و آپلود کند، کاربران دیگر می‌توانند دقیقاً از همان میزان جابه‌جایی نقشه استفاده کنند.  

هنگام استفاده از لایه‌های تصویر هوایی، **همیشه** باید آفست‌های موجود را بررسی کنید و هنگامی که آفست خود را ایجاد می‌کنید، **همیشه** باید آن را در این پایگاه‌داده ذخیره کنید.  


اضافه‌کردن آفست تصویر از پایگاه‌داده
------------------------------------

هنگامی که یک لایهٔ تصویر اضافه می‌کنید، این افزونهٔ تازه پیام هشداری نشان می‌دهد که باید پایگاه‌دادهٔ تصویر را برای آفست موجود بررسی کنید. یک آیکون با علامت تعجب قرمز روی آن در بالای JOSM خواهید دید، مانند این:  

![Imagery offset notification][]

- روی دکمه کلیک کنید. افزونه با پایگاه‌داده ارتباط برقرار خواهد کرد تا ببیند آیا برای این منطقه آفست‌هایی وجود دارد.  
- در اینجا ما دادهٔ OSM و ردهای GPS را برای شهر کوتا، بالی، اندونزی دانلود کرده‌ایم. در این مورد، یک آفست موجود پیدا کردیم. بر روی آن کلیک کنید تا به نقشه اعمال شود.  

![Offset in Kuta bali][]

- این باعث می‌شود که لایهٔ تصویر جابه‌جا شود. با این حال، هنگامی که آفست شخص دیگری را اضافه می‌کنیم (مانند الآن)، باید آن را با مسیرهای GPS مطابقت دهیم و بررسی کنیم که معتبر باشد.  

![Comparing imagery offset from GPS tracks][]

- می‌ببینیم که بله، لایهٔ تصویر تراز نیست. ما نمی‌خواهیم که سایر کاربران از این آفست استفاده کنند، بنابراین آن را در پایگاه‌داده به‌عنوان نادرست علامت‌گذاری کنیم. دوباره روی دکمهٔ Offsets کلیک کنید (دیگر علامت تعجب قرمز نخواهد داشت).  

![Offsets button][]

- این بار زمانی که کادر محاوره‌ای باز شد، روی آفست کلیک‌راست بکنید و گزینهٔ «منسوخ‌کردن آفست» (Deprecate Offset) را بزنید.  

![Deprecate offset][]

- برای تأیید روی Yes کلیک کنید.  
- سپس باید دلیل منسوخ‌کردن این آفست را بنویسید.  

![Deprecate reason][]


اضافه‌کردن آفست تصویر به پایگاه‌داده
------------------------------------

اکنون که آفست این کاربر را به‌عنوان «منسوخ» مشخص کردیم، باید یک آفست صحیح به پایگاه‌داده اضافه کنیم.  

1. روی دکمهٔ «تنظیم آفست تصویر» (Adjust imagery offset) کلیک کنید. ![Adjust imagery offset button][]{: height="24px"}  
2. تصویر را مطابق با ردهای GPS تنظیم کنید. OK را کلیک کنید.  
3. حالا به Offset ->‏ Store Imagery Offset...‎ بروید.  
![Store imagery offset][]
4. در پنجره‌ای که باز می‌شود توصیفی برای آفست بنویسید.  
![Offset description][]
5. روی OK کلیک کنید. آفست شما در پایگاه‌داده ذخیره خواهد شد.  
6. حال، لایهٔ GPS را پنهان کنید و لایهٔ دادهٔ OSM را نسبت به تصویرِ تنظیم‌شده، مقایسه کنید.  

![Corrected imagery][]

وای نه! کسی این منطقه را با تصویر ناتراز نقشه‌کشی کرده است. بنابراین این منطقه به‌درستی نقشه‌کشی نشده است. رفع این مشکل کمی زمان می‌برد.


وبسایت پایگاه‌دادهٔ آفست تصویر
--------------------------------

در نهایت، برای کسب اطلاعات بیشتر دربارهٔ پایگاه‌دادهٔ افست، می‌توانید وبسایت آن را در [http://offsets.textual.ru/](http://offsets.textual.ru/) بازدید کنید. این سایت تمام آفست‌هایی که در پایگاه‌داده آپلود شده را لیست می‌کند و همچنین نقشهٔ جالبی دارد که در آن محل آفست‌ها را تصویرسازی کرده است. که اینجا عکسش را می‌ببینید:  

![http://offsets.textual.ru/][]

> نکتهٔ دیگری که باید به خاطر بسپارید این است که آفست تصویر همه‌جا به یک اندازه نیست! این مسئله به‌ویژه در مناطقی که تپه و کوه زیادی دارند صادق است. بنابراین اگر به نظر می‌رسد تصویر در مناطق مختلف به اندازهٔ متفاوتی خارج از موقعیت است، باید دوباره آن را جابه‌جا کنید.  

خلاصه
--------

هنگامی که تازه در OpenStreetMap شروع به کار کرده‌اید، نیازی نیست دربارهٔ آفست تصویر خیلی نگران باشید. اما اگر می‌بینید که ویرایش‌های نقشه‌کش دیگری نسبت به تصویر ناترازی دارد، همیشه قبل از اینکه در آن عارضه‌ها دست ببرید و جایشان را تغییر دهید، باید در نظر داشته باشید که ممکن است تصویر خارج از موقعیت باشد. اگر هنوز برای کار با آفست‌ها کاملاً آماده نیستید، خوب است بدانید که وجود نقشه‌ای از یک منطقه با ۲۰ یا ۳۰ متر اختلاف با واقعیت، بهتر از آن است که آن منطقه اصلاً هیچ نقشه‌ای نداشته باشد. اما به یاد داشته باشید که به‌هرحال ممکن است آفست تصویر رخ دهد و اگر امکان اصلاح آن را داشتید، از مراحل ذکرشده در این فصل استفاده کنید.


[Misaligned imagery]: /images/josm/misaligned-images.png
[Aerial vs GPS]: /images/josm/aerial-vs-gps.png
[JOSM download button]: /images/josm/josm-download-button.png
[Download raw GPS data]: /images/josm/raw-gps-data.png
[Few GPS tracks from OSM]: /images/josm/osm-gps-tracks-few.jpg
[Many GPS tracks from OSM]: /images/josm/osm-gps-tracks-many.jpg
[Adjust imagery offset button]: /images/josm/adjust-imagery-offset-button.png
[Adjust imagery offset]: /images/josm/adjust-imagery-offset.png
[JOSM lat lon]: /images/josm/josm-lat-lon.png
[JOSM lat lon dialogue]: /images/josm/josm-lat-lon-dialogue.png
[JOSM plugins tab]: /images/josm/josm-plugins-tab.png
[Imagery_offset_db plugin]: /images/josm/imagery-offset-db-plugin.png
[Imagery offset notification]: /images/josm/offset-exclamation.png
[Offset in Kuta bali]: /images/josm/offset-kuta-bali.png
[Comparing imagery offset from GPS tracks]: /images/josm/offset-compare-gps.png
[Offsets button]: /images/josm/offsets-button.png
[Deprecate offset]: /images/josm/deprecate-offset.png
[Deprecate reason]: /images/josm/deprecate-reason.png
[Store imagery offset]: /images/josm/store-imagery-offset.png
[Offset description]: /images/josm/offset-description.png
[Corrected imagery]: /images/josm/correctly-placed.png
[http://offsets.textual.ru/]: /images/josm/offset-website.png










