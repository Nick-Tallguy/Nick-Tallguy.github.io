---
layout: doc
title: 编辑外业数据
permalink: /zh_CN/josm/editing-with-josm/
lang: zh_CN
category: josm
---

编辑外业数据
==================


我们现在已经涵盖了绘制OpenStreetMap的所有构件。在 [使用智能手机、GPS或纸张绘制地图](/zh_CN/mobile-mapping/) 章节，你可以看到如何使用移动工具来勘测一个区域。

在这一章中，我们将再次回到JOSM，并看一下迄今为止我们尚未涉及的几个新概念。

JOSM图层
-----------
如果你学习了这么久，可能已经注意到，我们可以在JOSM中添加各种不同的东西。我们可以下载OSM数据，添加必应卫星影像，加载GPS轨迹和轨迹点，并添加Field Papers——所有这些都会显示在JOSM的地图窗口中。

你可能还注意到了，每当你向JOSM添加新内容时，JOSM右侧的 "图层 "面板上就会多出一个项目。根据你打开的内容，你的图层面板可能看起来像这样：

![Layers panel][]

这个列表中的每一项都代表了你在地图窗口中打开的不同数据源。在这个例子中，“数据层1”是我们正在编辑的OpenStreetMap数据。"Field Papers”是我们在JOSM中添加Field Paper时创建的图层。

如果你添加了必应卫星影像，图层面板上会有另一个“Bing Sat (必应卫星)”的图层。

图层的概念往往很难理解。一个很好的想象方式是，每个图层都像一张半透明的纸，它们都是叠在一起的。每张纸上都有某种类型的信息，它们可以按照你喜欢的方式重新排列。

作为参考的图层，如卫星影像、GPS轨迹和Field Papers，通常被称为 "基础图层"。OSM数据图层是你实际使用的图层。

-   要移动一个图层，在 "图层 "面板中点击它，然后点击向上或向下的箭头来移动它。

![Layers up down][]

-   要隐藏一个图层，用鼠标选择它，然后点击显示/隐藏按钮：

![Layers show hide][]

-   你应该看到你选择的图层在地图窗口中消失。再次点击 "显示/隐藏"，它就会重新出现。
-   你可以通过选择图层并使用删除按钮来删除图层：

![Layers delete][]

-   最后，重要的是，你只能编辑被JOSM认为是*活动的图层。如果你无法在地图窗口中编辑地图，那可能是因为你没有将正确的图层设置为活动图层。大多数图层，如GPS点、实地文件和卫星影像，都不能被编辑。唯一可以编辑的图层是来自OpenStreetMap的数据，通常被称为 "数据图层1"。
-   要使图层处于活动状态，在“图层”面板中选择它，然后点击“激活”按钮。

![Layers activate][]


利用GPS数据和Field Papers
-------------------------------
在 [使用手机、GPS或纸张绘图](/zh_CN/mobile-mapping/) 章节中，我们看到了如何用GPS和实地纸质地图收集数据，以及如何将其作为一个图层加载到JOSM中。

一旦你用这些工具之一进行了调查，你仍然需要将信息以数字方式添加到OpenStreetMap中。

你用你之前学到的同样的过程来做这件事 - **下载、编辑、保存**。 不同的是，你不只可以使用卫星影像作为基础图层，还可以使用你的GPS数据、Field Papers、注记或它们的组合。

例如，假设你在JOSM中把GPS航点作为背景层，你在GPS上保存了一个名为030的航点，并且你在笔记本上写道030是一所学校。要将这个点添加到OpenStreetMap中，你将选择绘制工具，并在地图窗口中双击030点的顶部。这将创建一个点。然后进入预设组合菜单，找到学校的预设组合。输入学校的名称，然后点击“应用预设组合”。添加线条和形状也是一样的。

![GPS in JOSM][]

标签
----
你画一个点、线、面时，它有一个位置，但没有关于它是什么的信息。换句话说，我们知道它的**位置**，但不知道它**是什么**。在此之前，我们一直使用预设组合菜单中的项目来定义它**是什么**。OpenStreetMap知道对象**是什么** 的方式是通过 **标签（tags）**。

标签就像一个签条，你可以给某个东西贴上标签。例如，如果我们画一个正方形，它只是一个正方形。但我们再给它添加属性，描述它是什么：这个正方形是一栋建筑；建筑的名字是 "Menara Thamrin"；建筑有16层高。

你可以为一个对象添加任意数量的标签，标签被保存为文本对，称为**键(keys)**和**值(values)**。在OpenStreetMap中，上面所写的标签实际上是：

- building = yes
- name = Menara Thamrin
- building:levels = 15

如果在JOSM中选择一个对象，可以在右侧的属性面板中看到所有附加在它之上的标签。

![Properties panel][]

### 编辑标签

您可以从属性面板中添加、编辑和删除标签。然而，传统的标签都是英文的，有时可能会让人感到困惑，因此使用预设菜单通常更容易。当您添加或更改标签时，对象的属性也会改变。

-   要编辑对象的标签，先选中它。
-   然后用两种方法之一编辑标签。（1）使用预设菜单，或（2）在右侧的属性窗口中直接编辑标签。

### 常见错误：误将本想用于线或面的标签打在节点上

当您编辑一个点的属性时，你将首先选择该点，然后通过预设组合菜单或直接在属性面板中添加标签。一个常见的错误是在给点添加属性时添加了线条或形状的属性。当选择对象时，重要的是你要
自己选中的应该是线，而不是构成线的点。

这种情况经常发生，因为编辑者使用JOSM选择工具在对象周围画了一个框，这会导致所有的东西，包括线**和**节点都被选中，当你添加标签时，它们也会被应用到节点上。确保当你要给线条添加标签时，一定要**只**选择线条。

![Nodes mistake][]

保存 OSM 文件
----------------
当你在JOSM中进行编辑时，最好是在合理的短时间内下载、编辑并上传修改。你不希望在某一天下载数据，然后等到几天后再上传你的编辑。如果在这段时间里，别人编辑了同一个区域怎么办？这将导致错误和冲突。

不要害怕经常上传你的编辑。这样可以保证你的修改会被保存到数据库中，你不会失去你辛苦工作的成果。

如果你在一个区域内工作，最好每次要编辑时都下载地图数据，以防其他用户进行修改。

虽然你应该在准备好编辑时总是尝试下载 OSM 数据，并经常上传您的更改，但在某些情况下，您可能希望将 OSM 数据保存在计算机上。例如，如果你与互联网的连接断断续续，你可能希望下载数据，保存数据，编辑，然后再上传你的更改。

-   要保存 OSM 文件，请确保它 “图层”面板中的活动图层。点击顶部菜单中的“文件”，然后点击 “保存”。为文件选择一个位置，并给它起一个名字。你也可以通过点击这个按钮来保存：

![JOSM save button][]

-   你现在可以关闭JOSM，你的数据将被保存。当你想再次打开文件时，只需打开JOSM，进入 “文件”菜单，然后点击 “打开...”

小结
-------
在这一章中，我们仔细研究了一下JOSM界面，并了解了图层和标签。现在你应该对如何绘制地图和如何编辑OpenStreetMap有了一个坚实的基础。


[Layers panel]: /images/josm/josm_layers-panel.png
[Layers up down]: /images/josm/josm_layers-panel-up-down.png
[Layers show hide]: /images/josm/josm_layers-panel-show-hide.png
[Layers delete]: /images/josm/josm_layers-panel-delete.png
[Layers activate]: /images/josm/josm_layers-panel-activate.png
[GPS in JOSM]: /images/josm/josm_gps-layer.png
[Properties panel]: /images/josm/josm_properties-panel.png
[Nodes mistake]: /images/josm/josm_nodes-selected-mistake.png
[JOSM save button]: /images/josm/josm_save-button.png