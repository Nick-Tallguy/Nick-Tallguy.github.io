---
layout: doc
title: Втулок Opendata – дані з електронних таблиць
permalink: /uk/josm/opendata-plugin/
lang: uk
category: josm
---

Втулок Plugin – використання даних з електронних таблиць
============


- TOC
{:toc}

Ці настанови описують, як додавати дані в OpenStreetMap, що містяться в електронних таблицях, отриманих за результатами польових досліджень з використанням таких інструментів, як ODK collect чи Kobo collect. 

**Будь ласка, візьміть до уваги – якщо дані, які ви збираєтесь додати в OpenStreetMap підпадають під визначення “Імпорту”, звіртесь з [Настановами щодо Імпорту у Вікі OpenStreetMap](https://wiki.openstreetmap.org/wiki/Uk:Import/Guidelines). За наявності сумнівів, спочатку краще ознайомитись з ними!**


Встановлення втулку Opendata
--------------------------

Якщо ви ще не зробили цього, встановіть втулок використовуючи рекомендації з розділу про [Втулки JOSM](/uk/josm/josm-plugins).  

![Opendata][]

Після встановлення, натисніть на ![Opendata preferences][]   
для доступу до модулів втулка.  

![Opendata modules][]

Ці настанови використовують базовий функціонал та не вимагають встановлення модулів.

Підготовка електронної таблиці
-------------------------

Сторінка Вікі <https://wiki.openstreetmap.org/wiki/JOSM/Plugins/OpenData> надає більш детальні пояснення щодо форматів даних, які можна використовувати. Для наших потреб ми маємо на увазі, що дані містяться у пропрієтарному форматі **.xlsx**, який не сприймається втулком opendata.  

- Відкрийте таблицю в LibreOffice, який достпний для більшості сучасних операційних систем – <http://www.libreoffice.org/>, 
- та збережіть дані у відкритому форматі. Наша таблиця **shops.xlsx** перетвориться **shops.ods**.  

Хоча зараз вже можна завантажити електронну таблицю в JOSM, але краще внести інші поправки, щоб полегшити процес, ніж робити це зараз.

### широта & довгота

Втулок Opendata дуже добре витягує широту та довготу з електронних таблиць, але якщо ви сумніваєтесь, краще змінити заголовки стовпців на простіші;

![latitude longitude][]

стало;  

![latitude longitude corrected][]

### Ключі та Значення

#### Теґ name

Наша мета зараз – змінити електронну таблицю, так щоб інформація була у форматі OpenStreetMap. Заголовки стовпців будуть значеннями **Key**, а дані, що містяться в таблиці, перетворюються на їх **Значення / Value**. Для нашої простої електронної таблиці змініть заголовок першого стовпця з **Name_of_the_shop** на **name**. Використовуючи формат ключ=значення, тепер перший рядок електронної таблиці перетвориться у 
**name=Tony's Supermarket**

Якщо ваша таблиця містить більше ніж одну назву, можливо це буде **local name** чи **official name**, звіртесь з  <https://wiki.openstreetmap.org/wiki/Uk:Names>, що містить можливі варіанти, які ви зможете використовувати для пошуку даних в OpenStreetMap.  

#### Стовпчики без заголовків

Якщо ви вилучите заголовок стовпця, але залишите дані під ним, то дані фактично будуть приховані від JOSM.

![opendata 1][]

#### Стовпці з даними для різних ключів

![opendata mixed][]

Особи, які збирають дані, не завжди обізнані в тонкощах всіх теґів та їх значень, що ми використовуємо в OpenStreetMap. Стовпчик **shop**, в нашій таблиці, містить значення, для двох різних ключів, тож таблиця вимагає деяких змін. Стовпець **Type of shop** перейменуємо на **shop**, для наступних даних:  
  shop=supermarket  
  shop=convenience  
  shop=hairdresser  

проте  **restaurant** та **fast_food** це значення ключа **amenity**.

Нам треба додати новий стовпець з заголовком **amenity**, до якого перемістити ці дані; тож після наших змін таблиця виглядатиме наступним чином:

![opendata shop amenity][]

#### суб-теґи

Заголовок стовпця **Does_the_shop_have_toilet_faci** був обрізаний, в оригіналі він виглядав як **Does the shop have toilet facilities? (Чи є в магазині вбиральня?)**.  

Хоча й існує окремий теґ для туалетів, який зазвичай додається до точки всередині будівлі, він насправді стосується загально доступних туалетів. Якщо ми провели власне дослідження, ми точно знаємо, що передбачалося під запитанням та відповіддю, але якщо це інформація, передана нам, можливо, буде потрібно уточнити, що було позначено. Також надзвичайно корисно завантажити питання у телефон та провести "випробувальне" опитування, щоб мати уявлення про розташування запитань. Уважне ознайомлення з <https://wiki.openstreetmap.org/wiki/Tag:amenity=toilets>, а також вивчення матеріалів оригінального дослідження потрібне для внесення змін в таблицю. Зокрема, у вікі йдеться:

- *Будь ласка, не використовуйте toilet=yes (в однині). Загалом, будь ласка, не додавайте туалети, які недоступні для загалу. У багатьох будинках є туалети для робітників або власників, але їх додавання може створити непотрібні конфлікти або нереалістичні очікування. Використовуйте toilets=no в місцях, там де очікується наявність туалету (наприклад, залізничні станції), але туалет із загальним доступом відсутній.*  

Користуючись порадами з Вікі, ми змінили в таблиці інформацію про туалети наступним чином:

![opendata toilets][]


Ми вилучили заголовки для кількох стовпців, тож ці дані будуть не видимі, коли ми завантажимо їх для подальшого редагування в JOSM.

Завантаження таблиці в JOSM
---------------------------------

Натисніть на ![josm open][], знайдіть вашу таблицю та відкрийте її тепер в JOSM.  

![opendata pop up][]  

З’явиться вікно із запитанням про проєкцію ('projection method'), що використовувалась під час збирання даних. Втулок Opendata спробує вирахувати проєкцію та запропонує її як бажаний варіант. Якщо цей параметр не був змінений під час проведення досліджень, застосування запропонованого варіанта, але з обов'язковою перевіркою чи дані з’являються там де треба, буде розумним вибором.

![opendata spreadsheet loaded][]

Вітаємо! Ви зробили всю важку роботу, і тепер  майже готові оновити OpenStreetMap своїми новими даними, зібраними під час дослідження.

Використання втулка ToDo
----------------------

В JOSM виділіть всі дані, додані з вашої таблиці. Це можна зробити:

- змінивши масштаб так, щоб було видно всі дані, і за допомогою миші протягнути з лівого верхнього до правого нижнього кута утримуючи натиснутою ліву кнопку миші, або
- скористатись пошуком **Ctrl+f** та ввести в форму для пошуку **name**, теґ name міститься у всіх наших 5 записах.

переконайтесь, що ви виділили всі ваші дані – у нас 5 записів в таблиці, то ж ми матимемо 5 виділених об’єктів.

![5 selected][]

В панелі втулка ToDo натисніть **Додати / Add**.  

![opendata todo add][]

виділені об’єкти мають з’явитись в переліку об’єктів втулка ToDo.

![opendata todo loaded][]

Завантаження даних OpenStreetMap до окремого шару
-------------------------------------------

Двічі клацніть на першому елементі у списку ToDo, це призведе по переміщення до нього на мапі, та натисніть на значок Завантаження ![download][].

Після появи вікна Завантаження, натисніть на кнопку “Завантажити як новий шар”, щоб уникнути додавання даних до шару з даними вашої таблиці.

![download dialog][]


Порівняння даних між шарами
------------------------------------

Переконайтесь що ви ретельно звірили дані з вашої таблиці з даним що вже є в OpenStreetMap. Існує кілька способів перенесення даних між шарами (подивіться меню **Інструменти** та  **Ще інструменти** в JOSM, також ознайомтесь з іншими розділами в LearnOSM). В більшості випадків ви будете об’єднувати наявні дані з вашими. Уважно перевіряйте наявні дані, якщо треба звіряйтесь з історією редагувань об’єктів – завжди є шанс, що дані в OpenStreetMap можуть виявитись більш актуальними ніж дані з вашої таблиці.

Після того як ви оновили інформацію з одного рядка вашої таблиці, скористайтесь кнопкою **Позначити / Mark** на панелі втулка ToDo щоб перейти до наступного рядка; можливо вам доведеться завантажити додаткову порцію даних з OSM, якщо виділений елемент виявиться за межами завантаженої ділянки.


[Opendata]: /images/josm/opendata-plugin.png
[Opendata preferences]: /images/josm/opendata-preferences.png
[Opendata modules]: /images/josm/opendata-modules.png
[latitude longitude]: /images/josm/opendata-latitude-longitude.png
[latitude longitude corrected]: /images/josm/opendata-latitude-longitude-corrected.png
[opendata 1]: /images/josm/opendata-1.png
[opendata mixed]: /images/josm/opendata-mixed.png
[opendata shop amenity]: /images/josm/opendata-shop-amenity.png
[opendata toilets]: /images/josm/opendata-toilets.png
[josm open]: /images/josm/josm_open-file.png
[opendata pop up]: /images/josm/opendata-wgs84-popup.png
[opendata spreadsheet loaded]: /images/josm/opendata-spreadsheet-loaded.png
[5 selected]: /images/josm/opendata-5-selected.png
[opendata todo add]: /images/josm/opendata-todo-add.png
[opendata todo loaded]: /images/josm/opendata-todo-loaded.png
[download]: /images/josm/josm-download-button.png
[download dialog]: /images/josm/josm_download-dialog.png
[download new layer]: /images/josm/download-as-new-layer.png

